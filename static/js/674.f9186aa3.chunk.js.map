{"version":3,"file":"static/js/674.f9186aa3.chunk.js","mappings":"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","sources":["webpack://goit-react-hw-05-movies/./src/components/ButtonMore/ButtonMore.module.css?ad63","components/ButtonMore/ButtonMore.jsx","webpack://goit-react-hw-05-movies/./src/pages/HomePage/HomePage.module.css?5baa","pages/HomePage/HomePage.jsx","services/fetchApi.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"button\":\"ButtonMore_button__YPyE-\"};","import styles from 'components/ButtonMore/ButtonMore.module.css'\nexport const ButtonMore = ({ onLoadMore }) => {\n  return (\n//  Math.ceil(images.totalHits / images.perPage) <= pageNumber\n        <button onClick={onLoadMore}\n      className={styles.button}\n      \n    >\n      <p>NEXT</p>\n    </button> \n)}","// extracted by mini-css-extract-plugin\nexport default {\"conteiner\":\"HomePage_conteiner__hIL2K\",\"list\":\"HomePage_list__99c8-\",\"item\":\"HomePage_item__PHN05\",\"info\":\"HomePage_info__oqKMc\"};","import {toast} from 'react-toastify';\nimport { useState, useEffect } from 'react'\nimport { Link, Outlet, useLocation} from 'react-router-dom';\nimport { fetchByTrending } from '../../services/fetchApi'\nimport { Loader } from 'components/Loading/Loader';\nimport { ButtonMore } from 'components/ButtonMore/ButtonMore';\n// import  Pagination  from 'components/Pagination/Pagination';\nimport style from '../HomePage/HomePage.module.css'\n\n\nconst HomePage = () => {\n    const [movies, setMovies] = useState([]);\n    const [page, setPage]=useState(1)\n    const [error, setError] = useState(null);\n    const [loading, setLoading] = useState(false);\n  const [total, setTotal] = useState(20);\n  // const [currePage, setPerPAge] = useState(20)\n    const location = useLocation();\n    // console.log('locationHome',location)\n    // const firstRender= useRef(null) \n    //посмотреть репету про useRefрефс для исключения двойных запросов\n    \n  \n  useEffect(() => {\n        const fetchTrending = async () => {\n        try {\n            setLoading(true);\n            const response = await fetchByTrending(page)\n            //const pageNumber = response.page\nconst { results, total_pages }=response;\n            console.log('response',response)\n            setMovies(results)\n            setTotal(response.total_results)\n            // setPage(pageNumber)\n         //console.log('resp',response)\n           const totalPages = Math.ceil(total_pages /20);\n           if (response.results.length === 0) {\n            toast.info('No images found. Please submit another query!');\n          return\n          }\n           if (page === totalPages) {\n         toast(\"You've reached the end of search results.\");\n           }\n        }\n      catch(error){\n        setError('Ooops. Something went wrong...')\n            } \n        finally {\n        setLoading(false);\n      }  }\n      fetchTrending()\n    }, [page])\n\n//   const lastMovieIndex = page * total;\n//   const firstMovieIndex = lastMovieIndex - total;\n//  const currentMovie = movies.slise(firstMovieIndex,lastMovieIndex)\n//   const paginate= pageNumber=>setPage(pageNumber)\n  \n  const onLoadMore = () => {\n       setPage(prevPage => prevPage  + 1)\n    }    \n    \n const loadMovies = movies.length !== 0;\n//  console.log('loadImages',loadMovies)\n  const isLastPage = movies.length === total;\n//   console.log('isLastPage',isLastPage)\n  const loadMoreBtn =loadMovies &&  !loading && !isLastPage;\n//   console.log('loadMoreBtn',loadMoreBtn)\n    return (\n  \n       loadMovies && (\n       \n         <div className={style.conteiner}>\n             {error && alert(error.message)}\n                <ul className={style.list}>\n            {loading && <Loader />} \n            \n                {movies.map(({ id, title, poster_path, release_date, vote_average,original_title }) => {  \n                    return (\n                    < li key={id} className={style.item} >\n                            <p>{vote_average}</p>\n                            <Link to={`/movie/${id}`} state ={{from: location}}><img src={`https://image.tmdb.org/t/p/w500${poster_path}`} alt={original_title} /> </Link>\n                        <div className={style.info}>    \n                             <h1>{title}</h1>\n                        <p>{release_date}</p>\n                            </div>\n                    </li>    \n                    )    \n                })}     \n                </ul >\n              \n               {loadMoreBtn && <ButtonMore onLoadMore={onLoadMore}/> }  \n          <Outlet />  \n          {/* <Pagination total={total} totalPages={movies.length} paginate={paginate} />  */}\n            </div>\n        \n            )\n          \n    )\n\n}\nexport default HomePage;","import axios from \"axios\";\n\nconst KEY = \"a1426f875d9b25aa0fd82fb82639d8ae\"\n\naxios.defaults.baseURL= 'https://api.themoviedb.org/3/'\n//?api_key=<<api_key>>&language=en-US&page=1&include_adult=false\nexport async function fetchByTrending (page) {\n    const response = await axios('trending/movie/week',{\n        params:\n        {\n           api_key: KEY,\n            total_pages: 20,\n            page,\n        }    \n    })\n    return response.data;\n}\n \n\nexport async function fetchBySearch(query,page=1) {\n    const response = await axios('search/movie',{\n        params:\n        {\n           api_key: KEY,\n            total_pages: 20,\n            page:page,\n             query:`${query}`\n        }    \n    })\n    return response.data;\n}\n\nexport async function fetchMoviesById(movie_id) {\n    const response = await axios(`movie/${movie_id}`, {\n        params:\n        {\n          api_key: KEY,\n        }\n    })\n    return response.data;\n}\n\nexport async function fetchMoviesByActors(movie_id) {\n    const response = await axios(`movie/${movie_id}/credits`, {\n        params:\n        {\n            api_key: KEY,   \n           // cast:[]\n        }\n    })\n    return response.data;\n}\n\nexport async function fetchMoviesReviews(movie_id,page,results) {\n    const response = await axios(`movie/${movie_id}/reviews`, {\n        params:\n        {\n            api_key: KEY,   \n            results: [],\n            page:1,\n        }\n    })\n    return response.data.results;\n}\n"],"names":["ButtonMore","onLoadMore","onClick","className","styles","useState","movies","setMovies","page","setPage","error","setError","loading","setLoading","total","setTotal","location","useLocation","useEffect","fetchTrending","fetchByTrending","response","results","total_pages","console","log","total_results","totalPages","Math","ceil","length","toast","loadMovies","isLastPage","loadMoreBtn","style","alert","message","Loader","map","id","title","poster_path","release_date","vote_average","original_title","to","state","from","src","alt","prevPage","KEY","axios","params","api_key","data","fetchBySearch","query","fetchMoviesById","movie_id","fetchMoviesByActors","fetchMoviesReviews"],"sourceRoot":""}