{"version":3,"file":"static/js/674.e4383c22.chunk.js","mappings":"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","sources":["webpack://goit-react-hw-05-movies/./src/components/ButtonMore/ButtonMore.module.css?ad63","components/ButtonMore/ButtonMore.jsx","webpack://goit-react-hw-05-movies/./src/components/ScrollUp/ScrollUpBtn.module.css?dda6","components/ScrollUp/ScrollUpBtn.jsx","webpack://goit-react-hw-05-movies/./src/pages/HomePage/HomePage.module.css?5baa","pages/HomePage/HomePage.jsx","services/fetchApi.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"button\":\"ButtonMore_button__YPyE-\"};","import styles from 'components/ButtonMore/ButtonMore.module.css'\nexport const ButtonMore = ({ onLoadMore }) => {\n  return (\n//  Math.ceil(images.totalHits / images.perPage) <= pageNumber\n        <button onClick={onLoadMore}\n      className={styles.button}\n      \n    >\n      <p>NEXT</p>\n    </button> \n)}","// extracted by mini-css-extract-plugin\nexport default {\"btn\":\"ScrollUpBtn_btn__gQZOR\"};","import React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport styles from \"components/ScrollUp/ScrollUpBtn.module.css\"\nexport const ScrollUpBtn = () => {\n    const [scrollUpBtn, setscrollUpBtn] = useState(false);\n    useEffect(() => {\n        window.addEventListener('scroll', () => {\n            if (window.scrollY > 100) {\n                setscrollUpBtn(true)\n            } else {\n                setscrollUpBtn(false)\n            }\n        })\n    }, [])\n    \n    const scrollUp = () => {\n        window.scrollTo({\n            top: 0,\n            behavior:\"smooth\"\n        })\n    }\n    return (\n    <>\n        {scrollUpBtn && (\n                <button className={styles.btn}\n                   \n                onClick={scrollUp}>^</button>     \n        )}\n        </>\n    )\n}","// extracted by mini-css-extract-plugin\nexport default {\"conteiner\":\"HomePage_conteiner__hIL2K\",\"list\":\"HomePage_list__99c8-\",\"item\":\"HomePage_item__PHN05\",\"info\":\"HomePage_info__oqKMc\",\"navigationButtons\":\"HomePage_navigationButtons__RcrBV\",\"navigationActive\":\"HomePage_navigationActive__4G3us\",\"navigationDisabled\":\"HomePage_navigationDisabled__QUwyM\"};","// import {toast} from 'react-toastify';\nimport { useState, useEffect } from 'react'\nimport { Link, Outlet, useLocation} from 'react-router-dom';\nimport { fetchByTrending } from '../../services/fetchApi'\nimport { Loader } from 'components/Loading/Loader';\nimport { ButtonMore } from 'components/ButtonMore/ButtonMore';\nimport noIMG from 'images/noIMG.jpg'\nimport style from '../HomePage/HomePage.module.css';\n import { ScrollUpBtn } from 'components/ScrollUp/ScrollUpBtn';\n\nconst HomePage = () => {\n    const [movies, setMovies] = useState([]);\n    const [page, setPage]=useState(1)\n    const [error, setError] = useState(null);\n    const [loading, setLoading] = useState(false);\n  //const [total, setTotal] = useState(20);\n  const [totalResults, setTotalResults] = useState(0);\n// const [totalPages,settotalPages]=useState(20);\n  \n    const location = useLocation();\n    \n    //посмотреть репету про useRefрефс для исключения двойных запросов \n  useEffect(() => {\n        const fetchTrending = async () => {\n        try {\n            setLoading(true);\n            const response = await fetchByTrending(page)\n            //const pageNumber = response.page\nconst { results, total_pages }=response;\n            // console.log('response',response)\n            setMovies(results)\n           setTotalResults(response.total_results)\n            // setPage(pageNumber)\n         //console.log('resp',response)\n           const totalPages = Math.ceil(total_pages /20);\n           if (response.results.length === 0) {\n            alert('No images found. Please submit another query!');\n          return\n          }\n           if (page === totalPages) {\n         alert(\"You've reached the end of search results.\");\n           }\n        }\n      catch(error){\n        setError('Ooops. Something went wrong...')\n            } \n        finally {\n        setLoading(false);\n      }  }\n      fetchTrending()\n    }, [page])\n\n\n//  const paginate= pageNumber=>setPage(pageNumber)\n   \n//   const endOffset = page * totalPages;\n//   const firstMovieIndex =  endOffset - totalPages;\n//   const currentMovies = movies.slice(firstMovieIndex, endOffset);\n//   const pageCount = Math.ceil(movies.length / totalPages);\n//  const handlePageClick = (event) => {\n//     const newOffset = (event.selected * totalPages) %   movies.length;\n\n//     setTotalResults(newOffset);\n//   };\n\n  \n  const onLoadMore = () => {\n       setPage(prevPage => prevPage  + 1)\n    }    \n    \n const loadMovies = movies.length !== 0;\n\n  const isLastPage = movies.length === totalResults;\n\n  const loadMoreBtn =loadMovies &&  !loading && !isLastPage;\n\n    \n  return (\n  \n       loadMovies && (\n       \n         <div className={style.conteiner}>\n        {error && alert(error.message)}\n                <ul className={style.list}>\n            {loading && <Loader />} \n            \n                {movies.map(({ id, title, poster_path, release_date, vote_average,original_title }) => {  \n                    return (\n                    < li key={id} className={style.item} >\n                        <p>{vote_average}</p>\n                        <div className={style.info}> \n                          <Link to={`/movie/${id}`} state={{ from: location }}>\n                {poster_path !== null ? <img src={`https://image.tmdb.org/t/p/w500${poster_path}`} alt={original_title} />\n                : <img src={noIMG} alt={original_title} />\n              }\n                           </Link>\n                           \n                             <h1>{title}</h1>\n                        <p>{release_date}</p>\n                            </div>\n                    </li>    \n                    )    \n                })}     \n            <ScrollUpBtn/> \n                </ul >\n            \n          {loadMoreBtn && <ButtonMore onLoadMore={onLoadMore} />}  \n        <Outlet /> \n        {/* < Pagination\n         totalResults={totalResults}\n          paginate={paginate}\n        /> */}\n         \n            </div>\n        \n            )\n          \n    )\n\n}\nexport default HomePage;","import axios from \"axios\";\n\nconst KEY = \"a1426f875d9b25aa0fd82fb82639d8ae\"\n\naxios.defaults.baseURL= 'https://api.themoviedb.org/3/'\n//?api_key=<<api_key>>&language=en-US&page=1&include_adult=false\nexport async function fetchByTrending (page) {\n    const response = await axios('trending/movie/week',{\n        params:\n        {\n           api_key: KEY,\n            total_pages: 20,\n            page,\n        }    \n    })\n    return response.data;\n}\n \n\nexport async function fetchBySearch(query,page=1) {\n    const response = await axios('search/movie',{\n        params:\n        {\n           api_key: KEY,\n            total_pages: 20,\n            page:page,\n             query:`${query}`\n        }    \n    })\n    return response.data;\n}\n\nexport async function fetchMoviesById(movie_id) {\n    const response = await axios(`movie/${movie_id}`, {\n        params:\n        {\n          api_key: KEY,\n        }\n    })\n    return response.data;\n}\n\nexport async function fetchMoviesByActors(movie_id) {\n    const response = await axios(`movie/${movie_id}/credits`, {\n        params:\n        {\n            api_key: KEY,   \n           // cast:[]\n        }\n    })\n    return response.data;\n}\n\nexport async function fetchMoviesReviews(movie_id,page,results) {\n    const response = await axios(`movie/${movie_id}/reviews`, {\n        params:\n        {\n            api_key: KEY,   \n            results: [],\n            page:1,\n        }\n    })\n    return response.data.results;\n}\n"],"names":["ButtonMore","onLoadMore","onClick","className","styles","ScrollUpBtn","useState","scrollUpBtn","setscrollUpBtn","useEffect","window","addEventListener","scrollY","scrollTo","top","behavior","movies","setMovies","page","setPage","error","setError","loading","setLoading","totalResults","setTotalResults","location","useLocation","fetchTrending","fetchByTrending","response","results","total_pages","total_results","totalPages","Math","ceil","length","alert","loadMovies","isLastPage","loadMoreBtn","style","message","Loader","map","id","title","poster_path","release_date","vote_average","original_title","to","state","from","src","alt","noIMG","prevPage","KEY","axios","params","api_key","data","fetchBySearch","query","fetchMoviesById","movie_id","fetchMoviesByActors","fetchMoviesReviews"],"sourceRoot":""}