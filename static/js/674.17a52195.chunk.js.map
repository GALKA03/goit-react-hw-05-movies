{"version":3,"file":"static/js/674.17a52195.chunk.js","mappings":"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","sources":["webpack://goit-react-hw-05-movies/./src/components/ButtonMore/ButtonMore.module.css?ad63","components/ButtonMore/ButtonMore.jsx","webpack://goit-react-hw-05-movies/./src/pages/HomePage/HomePage.module.css?5baa","pages/HomePage/HomePage.jsx","services/fetchApi.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"button\":\"ButtonMore_button__YPyE-\"};","import styles from 'components/ButtonMore/ButtonMore.module.css'\nexport const ButtonMore = ({ onLoadMore }) => {\n  return (\n//  Math.ceil(images.totalHits / images.perPage) <= pageNumber\n        <button onClick={onLoadMore}\n      className={styles.button}\n      \n    >\n      <p>NEXT</p>\n    </button> \n)}","// extracted by mini-css-extract-plugin\nexport default {\"conteiner\":\"HomePage_conteiner__hIL2K\",\"list\":\"HomePage_list__99c8-\",\"item\":\"HomePage_item__PHN05\",\"info\":\"HomePage_info__oqKMc\",\"navigationButtons\":\"HomePage_navigationButtons__RcrBV\",\"navigationActive\":\"HomePage_navigationActive__4G3us\",\"navigationDisabled\":\"HomePage_navigationDisabled__QUwyM\"};","// import {toast} from 'react-toastify';\nimport { useState, useEffect } from 'react'\nimport { Link, Outlet, useLocation} from 'react-router-dom';\nimport { fetchByTrending } from '../../services/fetchApi'\nimport { Loader } from 'components/Loading/Loader';\nimport { ButtonMore } from 'components/ButtonMore/ButtonMore';\nimport noIMG from 'images/noIMG.jpg'\nimport style from '../HomePage/HomePage.module.css'\n\n\nconst HomePage = () => {\n    const [movies, setMovies] = useState([]);\n    const [page, setPage]=useState(1)\n    const [error, setError] = useState(null);\n    const [loading, setLoading] = useState(false);\n  //const [total, setTotal] = useState(20);\n  const [totalResults, setTotalResults] = useState(0);\n// const [totalPages,settotalPages]=useState(20);\n  \n    const location = useLocation();\n    \n    //посмотреть репету про useRefрефс для исключения двойных запросов \n  useEffect(() => {\n        const fetchTrending = async () => {\n        try {\n            setLoading(true);\n            const response = await fetchByTrending(page)\n            //const pageNumber = response.page\nconst { results, total_pages }=response;\n            // console.log('response',response)\n            setMovies(results)\n           setTotalResults(response.total_results)\n            // setPage(pageNumber)\n         //console.log('resp',response)\n           const totalPages = Math.ceil(total_pages /20);\n           if (response.results.length === 0) {\n            alert('No images found. Please submit another query!');\n          return\n          }\n           if (page === totalPages) {\n         alert(\"You've reached the end of search results.\");\n           }\n        }\n      catch(error){\n        setError('Ooops. Something went wrong...')\n            } \n        finally {\n        setLoading(false);\n      }  }\n      fetchTrending()\n    }, [page])\n\n\n//  const paginate= pageNumber=>setPage(pageNumber)\n   \n//   const endOffset = page * totalPages;\n//   const firstMovieIndex =  endOffset - totalPages;\n//   const currentMovies = movies.slice(firstMovieIndex, endOffset);\n//   const pageCount = Math.ceil(movies.length / totalPages);\n//  const handlePageClick = (event) => {\n//     const newOffset = (event.selected * totalPages) %   movies.length;\n\n//     setTotalResults(newOffset);\n//   };\n\n  \n  const onLoadMore = () => {\n       setPage(prevPage => prevPage  + 1)\n    }    \n    \n const loadMovies = movies.length !== 0;\n\n  const isLastPage = movies.length === totalResults;\n\n  const loadMoreBtn =loadMovies &&  !loading && !isLastPage;\n\n    \n  return (\n  \n       loadMovies && (\n       \n         <div className={style.conteiner}>\n             {error && alert(error.message)}\n                <ul className={style.list}>\n            {loading && <Loader />} \n            \n                {movies.map(({ id, title, poster_path, release_date, vote_average,original_title }) => {  \n                    return (\n                    < li key={id} className={style.item} >\n                        <p>{vote_average}</p>\n                        <div className={style.info}> \n                          <Link to={`/movie/${id}`} state={{ from: location }}>\n                {poster_path !== null ? <img src={`https://image.tmdb.org/t/p/w500${poster_path}`} alt={original_title} />\n                : <img src={noIMG} alt={original_title} />\n              }\n                           </Link>\n                           \n                             <h1>{title}</h1>\n                        <p>{release_date}</p>\n                            </div>\n                    </li>    \n                    )    \n                })}     \n                </ul >\n              \n          {loadMoreBtn && <ButtonMore onLoadMore={onLoadMore} />}  \n        <Outlet /> \n        {/* < Pagination\n         totalResults={totalResults}\n          paginate={paginate}\n        /> */}\n         \n            </div>\n        \n            )\n          \n    )\n\n}\nexport default HomePage;","import axios from \"axios\";\n\nconst KEY = \"a1426f875d9b25aa0fd82fb82639d8ae\"\n\naxios.defaults.baseURL= 'https://api.themoviedb.org/3/'\n//?api_key=<<api_key>>&language=en-US&page=1&include_adult=false\nexport async function fetchByTrending (page) {\n    const response = await axios('trending/movie/week',{\n        params:\n        {\n           api_key: KEY,\n            total_pages: 20,\n            page,\n        }    \n    })\n    return response.data;\n}\n \n\nexport async function fetchBySearch(query,page=1) {\n    const response = await axios('search/movie',{\n        params:\n        {\n           api_key: KEY,\n            total_pages: 20,\n            page:page,\n             query:`${query}`\n        }    \n    })\n    return response.data;\n}\n\nexport async function fetchMoviesById(movie_id) {\n    const response = await axios(`movie/${movie_id}`, {\n        params:\n        {\n          api_key: KEY,\n        }\n    })\n    return response.data;\n}\n\nexport async function fetchMoviesByActors(movie_id) {\n    const response = await axios(`movie/${movie_id}/credits`, {\n        params:\n        {\n            api_key: KEY,   \n           // cast:[]\n        }\n    })\n    return response.data;\n}\n\nexport async function fetchMoviesReviews(movie_id,page,results) {\n    const response = await axios(`movie/${movie_id}/reviews`, {\n        params:\n        {\n            api_key: KEY,   \n            results: [],\n            page:1,\n        }\n    })\n    return response.data.results;\n}\n"],"names":["ButtonMore","onLoadMore","onClick","className","styles","useState","movies","setMovies","page","setPage","error","setError","loading","setLoading","totalResults","setTotalResults","location","useLocation","useEffect","fetchTrending","fetchByTrending","response","results","total_pages","total_results","totalPages","Math","ceil","length","alert","loadMovies","isLastPage","loadMoreBtn","style","message","Loader","map","id","title","poster_path","release_date","vote_average","original_title","to","state","from","src","alt","noIMG","prevPage","KEY","axios","params","api_key","data","fetchBySearch","query","fetchMoviesById","movie_id","fetchMoviesByActors","fetchMoviesReviews"],"sourceRoot":""}